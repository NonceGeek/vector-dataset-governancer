(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{7670:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/github_repo_binder",function(){return n(1357)}])},1357:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(7568),i=n(1799),a=n(9396),s=n(603),c=n(655),o=n(5893),u=n(8002),l=n(3032),d=n(7294),p=n(6772);function h(){var e=function(){var e=Z.name,t=Z.description,n=Z.github_path,r=Z.expired_at;return{type:"entry_function_payload",function:u.Pz+"::service_aggregator::add_service",type_arguments:[],arguments:[e,t,n,n,"",r]}},t=function(){var e=Z.name,t=Z.description,n=Z.github_path,r=Z.expired_at;return{type:"entry_function_payload",function:u.Pz+"::service_aggregator::update_service",type_arguments:[],arguments:[e,t,n,n,"",r]}},n=function(){var e=Z.name;return{type:"entry_function_payload",function:u.Pz+"::service_aggregator::delete_service",type_arguments:[],arguments:[e]}},h=function(){var e=z.description;z.resource_path,z.addr_type,z.addr,z.pubkey,z.addr_description,z.chains;return{type:"entry_function_payload",function:u.Pz+"::init::init",type_arguments:[],arguments:[0,e]}},g=(0,s.Z)(d.useState(!1),2),f=g[0],x=g[1],_=(0,s.Z)(d.useState([]),2),m=_[0],b=_[1],v=(0,l.useWallet)(),j=v.account,y=v.signAndSubmitTransaction,w=new p.WalletClient(u.UE,u.Zt),N=(0,d.useState)({name:"github_repo",github_path:"",description:"my github repo.",gist_id:"",expired_at:0}),Z=N[0],k=N[1];function C(){return(C=(0,r.Z)((function(){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,y(e(),{gas_unit_price:100}).then((function(){setTimeout(E,3e3)}))];case 1:return t.sent(),[2]}}))}))).apply(this,arguments)}function S(){return(S=(0,r.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,y(t(),{gas_unit_price:100}).then((function(){setTimeout(E,3e3)}))];case 1:return e.sent(),[2]}}))}))).apply(this,arguments)}function D(){return(D=(0,r.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,y(n(),{gas_unit_price:100}).then((function(){setTimeout(E,3e3)}))];case 1:return e.sent(),[2]}}))}))).apply(this,arguments)}function I(){return(I=(0,r.Z)((function(){var e,t;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:if(!j||!j.address)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,w.aptosClient.getAccountResource(j.address.toString(),u.Pz+"::service_aggregator::ServiceAggregator")];case 2:return e=n.sent(),console.log("service_aggregator: "+e.data),console.log(e.data),x(!0),[3,4];case 3:return t=n.sent(),console.log("check_service_aggregator: "+t),x(!1),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}function E(){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)((function(){var e,t,n,r,i,a,s;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(!j||!j.address)return[3,9];c.label=1;case 1:return c.trys.push([1,8,,9]),[4,w.aptosClient.getAccountResource(j.address.toString(),u.Pz+"::service_aggregator::ServiceAggregator")];case 2:if(!(e=c.sent()))return[3,7];t=e.data.names,n=e.data.services_map.handle,r=[],i=0,c.label=3;case 3:return i<t.length?[4,w.aptosClient.getTableItem(n,{key_type:"0x1::string::String",value_type:u.Pz+"::service_aggregator::Service",key:t[i]})]:[3,6];case 4:(a=c.sent()).name=t[i],r.push(a),c.label=5;case 5:return i++,[3,3];case 6:console.log("services:"),r.forEach((function(e){console.log(e)})),b(r),c.label=7;case 7:return[3,9];case 8:return s=c.sent(),console.log(s),[3,9];case 9:return[2]}}))}))).apply(this,arguments)}function A(){return(A=(0,r.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,y(h(),{gas_unit_price:100}).then((function(){setTimeout(E,3e3)}))];case 1:return e.sent(),[2]}}))}))).apply(this,arguments)}(0,d.useEffect)((function(){!function(){I.apply(this,arguments)}()}),[j]),(0,d.useEffect)((function(){E()}),[j]),(0,d.useEffect)((function(){console.log(f)}),[f]),(0,d.useEffect)((function(){console.log(m)}),[m]);var T=(0,d.useState)({did_type:0,description:"",resource_path:"",addr_type:0,addr:"",pubkey:"",addr_description:"",chains:[],expired_at:0}),z=T[0],R=T[1],O=function(e){var t=e.name,n=e.description,r=e.url,a=e.verification_url,s=e.expired_at,c=r.split("/"),o=c[c.length-1],u=a.split("/"),l={name:t,description:n,github_path:o,gist_id:u[u.length-1],expired_at:s};k((0,i.Z)({},l))};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("b",{children:"Module Path: "}),(0,o.jsxs)("a",{target:"_blank",href:u.kA,className:"underline",children:[u.Pz,"::service_aggregator"]})]}),!f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{placeholder:"Description for your DID",className:"mt-8 p-4 input input-bordered input-primary w-1/2",onChange:function(e){return R((0,a.Z)((0,i.Z)({},z),{description:e.target.value}))}}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"The type of DID Owner: \xa0 \xa0 \xa0 \xa0",(0,o.jsxs)("select",{value:z.did_type,onChange:function(e){R((0,a.Z)((0,i.Z)({},z),{did_type:parseInt(e.target.value)}))},children:[(0,o.jsx)("option",{value:"0",children:"Individual"}),(0,o.jsx)("option",{value:"1",children:"DAO"}),(0,o.jsx)("option",{value:"2",children:"Bot"}),(0,o.jsx)("option",{value:"3",children:"Repo"})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:function(){return A.apply(this,arguments)},className:"btn btn-primary font-bold mt-4  text-white rounded p-4 shadow-lg",children:"Init Your DID"})," ","\xa0 \xa0 \xa0 \xa0 \ud83d\udca1 INIT Your DID on Aptos before the other Operations!",(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:E,className:"btn btn-primary font-bold mt-4  text-white rounded p-4 shadow-lg",children:"Refresh the Services Info"}),(0,o.jsx)("br",{})]}),f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:E,className:"btn btn-primary font-bold mt-4  text-white rounded p-4 shadow-lg",children:"Refresh the Services Info"}),(0,o.jsxs)("div",{className:"overflow-x-auto mt-2",children:[m.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h3",{className:"text-center font-bold",children:"Services"}),(0,o.jsx)("div",{children:(0,o.jsxs)("table",{className:"table table-compact w-full my-2",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:"text-center",children:[(0,o.jsx)("th",{children:"Service Name"}),(0,o.jsx)("th",{children:"Description"}),(0,o.jsx)("th",{children:"URL"}),(0,o.jsx)("th",{children:"Verification URL"}),(0,o.jsx)("th",{children:"Expired at"}),(0,o.jsx)("th",{children:"Load to form"})]})}),(0,o.jsx)("tbody",{children:m.length>0&&m.map((function(e,t){return(0,o.jsxs)("tr",{className:"text-center",children:[(0,o.jsx)("td",{children:e.name}),(0,o.jsx)("td",{children:e.description}),(0,o.jsx)("td",{children:(0,o.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:(0,o.jsxs)("p",{className:"underline",children:[e.url," "]})})}),(0,o.jsx)("td",{children:(0,o.jsx)("a",{href:e.verification_url,target:"_blank",rel:"noreferrer",children:(0,o.jsxs)("p",{className:"underline",children:[e.verification_url," "]})})}),(0,o.jsx)("td",{children:e.expired_at}),(0,o.jsx)("td",{children:(0,o.jsx)("button",{className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow",onClick:function(){return O(e)},children:"LOAD"})})]},t)}))})]})})]}),(0,o.jsx)("br",{})]}),(0,o.jsx)("input",{placeholder:"service Name",className:"mt-8 p-4 input input-bordered input-primary w-1/4",onChange:function(e){return k((0,a.Z)((0,i.Z)({},Z),{name:e.target.value}))},value:Z.name}),(0,o.jsx)("br",{}),(0,o.jsx)("input",{placeholder:"service Description",className:"mt-8 p-4 input input-bordered input-primary w-1/4",onChange:function(e){return k((0,a.Z)((0,i.Z)({},Z),{description:e.target.value}))},value:Z.description}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"inline-flex relative mr-3 formkit-field",children:[(0,o.jsx)("p",{children:"GitHub Repo path ( Begin with https:// ) :"}),(0,o.jsx)("input",{placeholder:"https://github.com/NonceGeek/MoveDID",className:"p-4 input input-bordered input-primary ml-2",onChange:function(e){return k((0,a.Z)((0,i.Z)({},Z),{github_path:e.target.value}))},value:Z.github_path})]}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"inline-flex relative mr-3 formkit-field",children:[(0,o.jsx)("p",{children:"0 means never expire: "}),(0,o.jsx)("input",{className:"p-4 input input-bordered input-primary ml-2",onChange:function(e){return k((0,a.Z)((0,i.Z)({},Z),{expired_at:parseInt(e.target.value)}))},placeholder:"0",value:Z.expired_at})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:function(){return C.apply(this,arguments)},className:"btn btn-primary font-bold mt-4  text-white rounded p-4 shadow-lg",children:"Add Service"}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:function(){return S.apply(this,arguments)},className:"btn btn-primary font-bold mt-4  text-white rounded p-4 shadow-lg",children:"Update Service"}),(0,o.jsx)("br",{}),(0,o.jsx)("input",{placeholder:"service Name",className:"mt-8 p-4 input input-bordered input-primary w-1/4",onChange:function(e){return k((0,a.Z)((0,i.Z)({},Z),{name:e.target.value}))},value:Z.name}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:function(){return D.apply(this,arguments)},className:"btn btn-primary font-bold mt-4  text-white rounded p-4 shadow-lg",children:"Delete Service"})]})]})}}},function(e){e.O(0,[980,774,888,179],(function(){return t=7670,e(e.s=t);var t}));var t=e.O();_N_E=t}]);